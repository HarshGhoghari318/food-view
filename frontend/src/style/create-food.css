@import './theme.css';

/* Container */
.create-food-page {
  min-height: 100dvh;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding: var(--space-6) var(--space-4);
  background: radial-gradient(1200px 600px at 10% -10%, var(--color-surface-alt) 0%, transparent 45%),
              radial-gradient(1200px 600px at 110% 110%, var(--color-surface-alt) 0%, transparent 45%),
              var(--color-bg);
}

.create-food-card {
  width: 100%;
  max-width: 720px; /* mobile-first but centered card */
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-md);
  padding: var(--space-6);
  display: flex;
  flex-direction: column;
  gap: var(--space-5);
}

.create-food-header { display: grid; gap: var(--space-2); }
.create-food-title { font-size: 1.35rem; font-weight: 700; }
.create-food-subtitle { color: var(--color-text-secondary); font-size: .95rem; }

/* Form */
.create-food-form { display: grid; gap: var(--space-5); }
@media (min-width: 960px) {
  .create-food-form { gap: var(--space-6); }
}

.field-group { display: grid; gap: 6px; }
.field-group label {
  font-size: .75rem;
  text-transform: uppercase;
  letter-spacing: .07em;
  font-weight: 700;
  color: var(--color-text-secondary);
}

/* Inputs */
.field-group input[type="text"],
.field-group input[type="file"],
.field-group textarea {
  appearance: none;
  border: 1px solid var(--color-border);
  background: var(--color-surface-alt);
  padding: 10px 12px;
  font: inherit;
  border-radius: var(--radius-sm);
  outline: none;
  color: var(--color-text);
  transition: border-color var(--transition-base), background var(--transition-base), box-shadow var(--transition-base);
}

.field-group textarea { resize: vertical; min-height: 96px; }

.field-group input:focus-visible,
.field-group textarea:focus-visible {
  border-color: var(--color-accent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-accent) 55%, transparent);
  background: var(--color-surface);
}

.small-note { font-size: .78rem; color: var(--color-text-secondary); }

/* Custom file input */
.file-input-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0 0 0 0); white-space: nowrap; border: 0; }

.file-dropzone {
  border: 1.5px dashed var(--color-border);
  background: color-mix(in srgb, var(--color-surface-alt) 70%, transparent);
  border-radius: var(--radius-sm);
  padding: var(--space-6);
  cursor: pointer;
  user-select: none;
  transition: border-color var(--transition-base), background var(--transition-base), box-shadow var(--transition-base), transform var(--transition-base);
}

.file-dropzone:hover { border-color: var(--color-accent); background: var(--color-surface-alt); }
.file-dropzone:active { transform: translateY(1px); }
.file-dropzone:focus-visible { outline: 2px solid var(--color-accent); outline-offset: 2px; }

.file-dropzone-inner { display: grid; place-items: center; text-align: center; gap: var(--space-3); color: var(--color-text-secondary); }
.file-icon { color: var(--color-accent); }
.file-dropzone-text { color: var(--color-text); }
.file-hint { font-size: .8rem; }

.error-text { color: var(--color-danger); font-size: .85rem; margin-top: var(--space-2); }

.file-chip {
  margin-top: var(--space-3);
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-3);
  padding: 8px 12px;
  border-radius: var(--radius-sm);
  width: 100%;
  background: var(--color-surface-alt);
  border: 1px solid var(--color-border);
}

.file-chip-name { font-weight: 600; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.file-chip-size { font-size: .85rem; color: var(--color-text-secondary); margin-left: auto; }
.file-chip-actions { display: inline-flex; align-items: center; gap: 8px; }

.btn-ghost {
  background: transparent;
  border: 1px solid transparent;
  color: var(--color-accent);
  padding: 6px 10px;
  border-radius: 999px;
  font: inherit;
  font-weight: 700;
  letter-spacing: .2px;
  cursor: pointer;
  transition: background var(--transition-base), color var(--transition-base);
}

.btn-ghost:hover { background: color-mix(in srgb, var(--color-accent) 12%, transparent); }
.btn-ghost:focus-visible { outline: 2px solid var(--color-accent); outline-offset: 2px; }
.btn-ghost.danger { color: var(--color-danger); }
.btn-ghost.danger:hover { background: color-mix(in srgb, var(--color-danger) 12%, transparent); }

/* Video preview */
.video-preview {
  width: 100%;
  border-radius: var(--radius-sm);
  overflow: hidden;
  border: 1px dashed var(--color-border);
  background: var(--color-surface-alt);
  display: grid;
  place-items: center;
  /* Prevent tall videos from stretching the card */
}

.video-preview-el {
  width: 100%;
  height: 100%;
  display: block;
  background: #000;
  object-fit: contain;
}

/* Actions */
.form-actions { display: flex; gap: var(--space-3); }

.btn-primary {
  background: var(--color-accent);
  color: #fff;
  border: none;
  border-radius: var(--radius-sm);
  padding: 12px 16px;
  font: inherit;
  font-weight: 700;
  letter-spacing: .3px;
  cursor: pointer;
  transition: background var(--transition-base), transform var(--transition-base), box-shadow var(--transition-base);
}

.btn-primary:hover { background: var(--color-accent-hover); }
.btn-primary:active { transform: translateY(1px); }
.btn-primary:disabled { opacity: .6; cursor: not-allowed; }

/* Prevent body scroll while uploading */
body.uploading {
    overflow: hidden;
}

/* Upload overlay & progress - visual refinements */
.upload-overlay {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(2,6,23,0.6);
    z-index: 9999;
    backdrop-filter: blur(6px);
}
.upload-card {
    width: 360px;
    padding: 20px 22px;
    border-radius: 12px;
    background: #0f1724;
    color: #e6eef8;
    box-shadow: 0 14px 40px rgba(2,6,23,0.6);
    text-align: center;
    transform: translateY(-6px);
    animation: card-pop 220ms cubic-bezier(.2,.9,.2,1);
}
@keyframes card-pop {
    from { opacity: 0; transform: translateY(-12px) scale(.98); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}
.spinner {
    width: 42px;
    height: 42px;
    margin: 6px auto 10px;
    border-radius: 50%;
    border: 4px solid rgba(255,255,255,0.06);
    border-top-color: var(--accent, #7c5cff);
    animation: spinner 1s linear infinite;
}
@keyframes spinner {
    to { transform: rotate(360deg); }
}
.upload-text { font-weight: 700; margin-bottom: 8px; color: #e6eef8; }
.progress-bar {
    height: 8px;
    background: rgba(255,255,255,0.06);
    border-radius: 999px;
    overflow: hidden;
    margin-top: 10px;
}
.progress-fill {
    height: 100%;
    background: linear-gradient(90deg,var(--accent, #7c5cff),#4f46e5);
    width: 0%;
    transition: width 240ms linear;
}

/* Make dropzone clearly disabled during upload */
.file-dropzone[aria-disabled="true"] {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
}

/* Buttons disabled style */
.btn-ghost[disabled], .btn-primary[disabled] {
    opacity: 0.55;
    cursor: not-allowed;
}

/* Toast - animation + theming */
/* Toast container */
.toast {
  position: fixed;
  top: 16px;               /* ðŸ‘ˆ TOP */
  left: 50%;
  transform: translateX(-50%);

  min-width: 280px;
  max-width: 90vw;

  padding: 12px 16px;
  border-radius: 12px;

  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;

  font-size: 14px;
  font-weight: 500;

  z-index: 9999;           /* ðŸ‘ˆ ABOVE EVERYTHING */
  box-shadow: 0 10px 30px rgba(0,0,0,0.35);

  animation: toast-slide-down 0.3s ease-out;
}

/* Toast types */
.toast.success {
  background: #16a34a;
  color: #ffffff;
}

.toast.error {
  background: #dc2626;
  color: #ffffff;
}

/* Toast close button */
.toast-close {
  background: none;
  border: none;
  color: inherit;
  font-size: 18px;
  cursor: pointer;
}

/* Slide down animation */
@keyframes toast-slide-down {
  from {
    opacity: 0;
    transform: translate(-50%, -12px);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}


/* Types */
.toast.success { background: #ecfdf5; color: #065f46; border: 1px solid rgba(6,95,70,0.08); }
.toast.error { background: #fff1f2; color: #9f1239; border: 1px solid rgba(159,18,57,0.08); }

/* Dark mode support */
@media (prefers-color-scheme: dark) {
    .upload-card { background: #0b1220; color: #e6eef8; box-shadow: 0 10px 30px rgba(3,6,15,0.75); }
    .upload-overlay { background: rgba(0,0,0,0.6); }
    .progress-bar { background: rgba(255,255,255,0.06); }
    .toast.success { background: #042e27; color: #bbf7d0; border-color: rgba(11, 92, 77, 0.15); }
    .toast.error { background: #3b0b12; color: #ffd7de; border-color: rgba(120, 13, 36, 0.15); }
}

/* If the app uses a .dark class on body */
body.dark .upload-card { background: #0b1220; color: #e6eef8; }
body.dark .toast.success { background: #042e27; color: #bbf7d0; }
body.dark .toast.error { background: #3b0b12; color: #ffd7de; }
/* ================= NAV ARROWS ================= */

.create-food-nav {
  position: fixed;
  top: 30px;
  left: 75%;
  right: 16px;

  display: flex;
  justify-content: space-between;
  pointer-events: none; /* container ignores clicks */
  z-index: 1200;
}

.nav-arrow {
  pointer-events: auto; /* button receives clicks */
  width: 40px;
  height: 40px;
  border-radius: 50%;

  display: grid;
  place-items: center;

  background: rgba(15, 23, 36, 0.7);
  backdrop-filter: blur(6px);

  color: white;
  font-size: 18px;
  font-weight: 700;

  border: 1px solid rgba(255,255,255,0.15);
  cursor: pointer;

  transition: transform 0.15s ease, background 0.15s ease;
}

.nav-arrow:hover {
  background: rgba(15, 23, 36, 0.9);
}

.nav-arrow:active {
  transform: scale(0.94);
}
